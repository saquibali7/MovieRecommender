{% extends "layout.html" %}

{% block body %}


<body>


  <div class="header-bar">
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
      <a class="navbar-brand" href="/"><i class="fas fa-home"> Home</i></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="navbar-brand" href="/movie"></a>
          </li>
        </ul>
        <li class="nav-item">
          <a class="navbar-brand" href="/watchlist">WatchList</a>
        </li>
      </div>
    </nav>
  </div>



  <div class="input-group">
    <form action="/movie" , method="POST">
      <div class="search-box">
        <input class="form-control" autocomplete="off" autofocus placeholder="MovieName" name="movieName" type="search">
        <div class="input-group-append">
          <button class="btn btn-secondary" type="submit" value="Submit">recommend</button>
        </div>
      </div>
    </form>
  </div>


  <div class="rec_movie_name">
    <p>Popular Movies</p>
  </div>
  <div class="recommend_movie">

    <div class="row">

      {% for i in range(8) %}
      <div class=" pricing-column col-lg-3 col-md-6">
        <div class="card">
          <div class="card-body">
            <img src="{{  poster[i] }}" alt="">
            <p class="movie-name">{{ new_movie[i] }}</p>
            <button type="button" class="btn btn-outline-dark btn-block "><form action="/watchlist" method="post">
              <input name="id" type="hidden" value="{{ new_movie[i] }}">
              <input class="form-control" type="submit" value="Add to Watchlist">
            </form></button>

          </div>
        </div>
      </div>
      {% endfor %}

    </div>
  </div>

  <script crossorigin="anonymous" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
    let input = document.querySelector('input');
    input.addEventListener('keyup', function() {
      $.get('/search?q=' + input.value, function(search_movies) {
                  let html = '';
                  for (let id in search_movies)
                  {
                      let title = search_movies[id].title;
                      html += '<li>' + title + '</li>';
                  }

                  document.querySelector('ul').innerHTML = html;
                });
    });
  </script>

  {% endblock %}
